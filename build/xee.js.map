{"version":3,"sources":["xeeES6.js"],"names":["XEE","module","EE","EventEmitter","_events","Object","create","type","listener","ev","_arrayCloneWith","length","on","ls","fired","off","apply","arguments","argsLen","evLen","indexOf","_arrayCloneWithout","args","events","error","Error","e","context","i","len","arr","n","copy","Array","t","r","exports"],"mappings":"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","file":"xee.js","sourcesContent":["const XEE = (function(module) {\r\n//-----------------------------------------------------\r\n//\r\n// Author: Daeren\r\n// Site: 666.io\r\n//\r\n//-----------------------------------------------------\r\n\r\n\"use strict\";\r\n\r\n//-----------------------------------------------------\r\n\r\nconst EE = (function() {\r\n    class EventEmitter {\r\n        constructor() {\r\n            this._events = Object.create(null);\r\n        }\r\n\r\n\r\n        on(type, listener) {\r\n            const ev = this._events[type];\r\n\r\n            if(typeof(ev) === \"function\") {\r\n                this._events[type] = [ev, listener];\r\n            }\r\n            else {\r\n                this._events[type] = ev ? this._arrayCloneWith(ev, ev.length, listener) : listener;\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        once(type, listener) {\r\n            return this.on(type, function ls() {\r\n                if(!ls.fired) {\r\n                    this.off(type, ls);\r\n                    ls.fired = true;\r\n\r\n                    listener.apply(this, arguments);\r\n                }\r\n            });\r\n        }\r\n\r\n        off(type, listener) {\r\n            const argsLen = arguments.length;\r\n\r\n            if(!argsLen) {\r\n                this._events = Object.create(null);\r\n                return this;\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            const ev = this._events[type];\r\n\r\n            if(argsLen === 1) {\r\n                delete this._events[type];\r\n                return this;\r\n            }\r\n\r\n            if(typeof(ev) === \"function\") {\r\n                if(ev === listener) {\r\n                    delete this._events[type];\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            const evLen = ev && ev.length;\r\n\r\n            if(!evLen) {\r\n                return this;\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            if(evLen === 1) {\r\n                if(ev[0] === listener) {\r\n                    delete this._events[type];\r\n                }\r\n            }\r\n            else if(evLen === 2) {\r\n                if(ev[0] === listener) {\r\n                    this._events[type] = ev[1];\r\n                }\r\n                else if(ev[1] === listener) {\r\n                    this._events[type] = ev[0];\r\n                }\r\n            }\r\n            else if(ev.indexOf(listener) >= 0) {\r\n                this._events[type] = this._arrayCloneWithout(ev, evLen, listener);\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            return this;\r\n        }\r\n\r\n        emit(type, ...args) {\r\n            const events = this._events[type];\r\n\r\n            //--------------]>\r\n\r\n            if(!events) {\r\n                if(type === \"error\") {\r\n                    const error = arguments[1];\r\n\r\n                    if(error instanceof(Error)) {\r\n                        throw error;\r\n                    }\r\n                    else {\r\n                        const e = new Error(`Unhandled \"error\" event. (${error})`);\r\n                        e.context = error;\r\n\r\n                        throw e;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            if(typeof(events) === \"function\") {\r\n                events.apply(this, args);\r\n            }\r\n            else {\r\n                for(let i = 0, len = events.length; i < len; ++i) {\r\n                    events[i].apply(this, args);\r\n                }\r\n            }\r\n\r\n            //--------------]>\r\n\r\n            return true;\r\n        }\r\n\r\n\r\n        listenerCount(type) {\r\n            const events = this._events;\r\n\r\n            if(events) {\r\n                const ev = events[type];\r\n\r\n                if(typeof(ev) === \"function\") {\r\n                    return 1;\r\n                }\r\n                else if(ev) {\r\n                    return ev.length;\r\n                }\r\n            }\r\n\r\n            return 0;\r\n        }\r\n\r\n\r\n        _arrayCloneWithout(arr, n, listener) {\r\n            const copy = new Array(n - 1);\r\n\r\n            let t,\r\n                i = 0,\r\n                r = false;\r\n\r\n            while(n--) {\r\n                t = arr[n];\r\n\r\n                if(!r && listener === t) {\r\n                    r = true;\r\n                }\r\n                else {\r\n                    copy[i] = t;\r\n                    ++i;\r\n                }\r\n            }\r\n\r\n            return copy;\r\n        }\r\n\r\n        _arrayCloneWith(arr, n, listener) {\r\n            const copy = new Array(n + 1);\r\n\r\n            copy[n] = listener;\r\n\r\n            while(n--) {\r\n                copy[n] = arr[n];\r\n            }\r\n\r\n            return copy;\r\n        }\r\n    }\r\n\r\n    //-----------------------]>\r\n\r\n    return EventEmitter;\r\n})();\r\n\r\n//-----------------------------------------------------\r\n\r\nmodule.exports = EE;\r\n\r\nreturn EE; })({});"]}